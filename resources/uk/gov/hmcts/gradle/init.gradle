def mirrorHost = (System.getenv("NONPROD_SUBSCRIPTION_NAME") == "sandbox") ? 'sandbox-artifactory' : 'artifactory'
def mirrorUrl = "https://${mirrorHost}.platform.hmcts.net/artifactory/maven-remotes"

allprojects {
  repositories {
    maven {
      url mirrorUrl
    }
  }
  buildscript {
    repositories {
      maven {
        url mirrorUrl
      }
      mavenCentral()
    }
    dependencies {
      classpath  group: 'com.microsoft.sqlserver', name: 'mssql-jdbc', version: '7.2.1.jre8'
    }
  }

  task printVersionInit {
    doLast { println project.version }
  }
}

settingsEvaluated { settings ->
  settings.pluginManagement {
    repositories {
      maven {
        url mirrorUrl
      }
    }
  }
}
